if(!Joomla)throw new Error("Joomla API was not properly initialized");function seek(t,e){t.currentTime=e,t.play()}function updchapter(t,e,a,n){if(t.seeking)e.innerHTML=n;else if(t.currentTime<=0)e.innerHTML="";else{let n="",r=a.length-1;for(;r>=0;){if(t.currentTime>=a[r].start){n=a[r].title;break}r-=1}e.innerHTML=n}}function setstatus(t,e){t.innerHTML=e}function clearstatus(t,e){t.innerHTML===e&&(t.innerHTML="")}const allAudioPlayerDivs=document.querySelectorAll("div.rfaudioplayer");allAudioPlayerDivs.forEach((t=>{const e=t.getElementsByTagName("audio")[0],a=t.querySelector(".rfaudiostatus"),n=!!a&&!!a.getAttribute("data-show-status"),r=!!a&&!!a.getAttribute("data-show-title"),s=t.getElementsByTagName("li");let i="";if(n){const t=Joomla.Text._("MOD_RFAUDIO_LOADING").replace("&hellip;","…");i=Joomla.Text._("MOD_RFAUDIO_SEEKING").replace("&hellip;","…"),e.addEventListener("loadstart",(()=>{2===e.networkState&&setstatus(a,t)})),e.addEventListener("waiting",(()=>{2===e.networkState&&setstatus(a,t)})),e.addEventListener("canplay",(()=>{clearstatus(a,t)})),e.addEventListener("playing",(()=>{clearstatus(a,t)})),e.addEventListener("seeking",(()=>{setstatus(a,i)})),e.addEventListener("seeked",(()=>{clearstatus(a,i)}))}if(r){const t=[];for(let a=0;a<s.length;a+=1){const n=s[a].getElementsByTagName("button")[0],r={start:parseFloat(n.getAttribute("data-start")).toFixed(1),title:n.innerHTML};t[a]=r,n.addEventListener("click",(()=>{seek(e,r.start)}))}t[s.length]={start:e.duration,title:""},e.addEventListener("durationchange",(()=>{t[s.length].start=e.duration})),e.addEventListener("timeupdate",(()=>{updchapter(e,a,t,i)}))}else for(let t=0;t<s.length;t+=1){const a=s[t].getElementsByTagName("button")[0];a.addEventListener("click",(()=>{seek(e,parseFloat(a.getAttribute("data-start")).toFixed(1))}))}}));